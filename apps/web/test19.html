<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      http-equiv="Content-Security-Policy"
      content="
        default-src 'self' 'unsafe-inline' blob: resource:;
        object-src 'self' blob:;
        frame-src 'self' blob:;
      "
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="/apps/web/index.css" />
    <title>Test 19</title>
    <script type="text/javascript" src="/dist/pdf-lib.js"></script>
    <script type="text/javascript" src="/apps/web/utils.js"></script>
  </head>

  <body>
    <div id="button-container">
      <button onclick="window.location.href = '/apps/web/test3.html'">
        Prev
      </button>
      <button onclick="test()">Run Test</button>
      <button onclick="window.location.href = '/apps/web/test5.html'">
        Next
      </button>
    </div>
    <!-- <div  ></div> -->
    <iframe id="iframe"></iframe>
  </body>

  <script type="text/javascript">
    // startFpsTracker('animation-target');

    const renderInIframe = (pdfBytes) => {
      const blob = new Blob([pdfBytes], { type: 'application/pdf' });
      const blobUrl = URL.createObjectURL(blob);
      document.getElementById('iframe').src = blobUrl;
    };

    async function test() {
      const {
        PDFDocument,
        PDFPage,
        radians,
        StandardFonts,
        rgb,
        degrees,
      } = PDFLib;

      const pdfDoc = await PDFDocument.create();
      const firstPage = pdfDoc.addPage([1000, 1000]);

      const fontSize = 20;

      const svg2 = `
      <svg
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        width="505"
        height="505"
        viewBox="-10 -19.437340153452684 20 38.87468030690537"
      >
        <g transform="scale(1 -1) translate(0 0)">
          <line
            id="gridX:0"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:1"
            x1="1"
            x2="1"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:2"
            x1="2"
            x2="2"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:3"
            x1="3"
            x2="3"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:4"
            x1="4"
            x2="4"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:5"
            x1="5"
            x2="5"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:6"
            x1="6"
            x2="6"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:7"
            x1="7"
            x2="7"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:8"
            x1="8"
            x2="8"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridX:9"
            x1="9"
            x2="9"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-1"
            x1="-1"
            x2="-1"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-2"
            x1="-2"
            x2="-2"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-3"
            x1="-3"
            x2="-3"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-4"
            x1="-4"
            x2="-4"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-5"
            x1="-5"
            x2="-5"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-6"
            x1="-6"
            x2="-6"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-7"
            x1="-7"
            x2="-7"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-8"
            x1="-8"
            x2="-8"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridx:-9"
            x1="-9"
            x2="-9"
            y1="-19.437340153452684"
            y2="19.437340153452684"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:0"
            x1="-10"
            x2="10"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:1"
            x1="-10"
            x2="10"
            y1="1"
            y2="1"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:2"
            x1="-10"
            x2="10"
            y1="2"
            y2="2"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:3"
            x1="-10"
            x2="10"
            y1="3"
            y2="3"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:4"
            x1="-10"
            x2="10"
            y1="4"
            y2="4"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:5"
            x1="-10"
            x2="10"
            y1="5"
            y2="5"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:6"
            x1="-10"
            x2="10"
            y1="6"
            y2="6"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:7"
            x1="-10"
            x2="10"
            y1="7"
            y2="7"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:8"
            x1="-10"
            x2="10"
            y1="8"
            y2="8"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:9"
            x1="-10"
            x2="10"
            y1="9"
            y2="9"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:10"
            x1="-10"
            x2="10"
            y1="10"
            y2="10"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:11"
            x1="-10"
            x2="10"
            y1="11"
            y2="11"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:12"
            x1="-10"
            x2="10"
            y1="12"
            y2="12"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:13"
            x1="-10"
            x2="10"
            y1="13"
            y2="13"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:14"
            x1="-10"
            x2="10"
            y1="14"
            y2="14"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:15"
            x1="-10"
            x2="10"
            y1="15"
            y2="15"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:16"
            x1="-10"
            x2="10"
            y1="16"
            y2="16"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:17"
            x1="-10"
            x2="10"
            y1="17"
            y2="17"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:18"
            x1="-10"
            x2="10"
            y1="18"
            y2="18"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:19"
            x1="-10"
            x2="10"
            y1="19"
            y2="19"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-1"
            x1="-10"
            x2="10"
            y1="-1"
            y2="-1"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-2"
            x1="-10"
            x2="10"
            y1="-2"
            y2="-2"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-3"
            x1="-10"
            x2="10"
            y1="-3"
            y2="-3"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-4"
            x1="-10"
            x2="10"
            y1="-4"
            y2="-4"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-5"
            x1="-10"
            x2="10"
            y1="-5"
            y2="-5"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-6"
            x1="-10"
            x2="10"
            y1="-6"
            y2="-6"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-7"
            x1="-10"
            x2="10"
            y1="-7"
            y2="-7"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-8"
            x1="-10"
            x2="10"
            y1="-8"
            y2="-8"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-9"
            x1="-10"
            x2="10"
            y1="-9"
            y2="-9"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-10"
            x1="-10"
            x2="10"
            y1="-10"
            y2="-10"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-11"
            x1="-10"
            x2="10"
            y1="-11"
            y2="-11"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-12"
            x1="-10"
            x2="10"
            y1="-12"
            y2="-12"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-13"
            x1="-10"
            x2="10"
            y1="-13"
            y2="-13"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-14"
            x1="-10"
            x2="10"
            y1="-14"
            y2="-14"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-15"
            x1="-10"
            x2="10"
            y1="-15"
            y2="-15"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-16"
            x1="-10"
            x2="10"
            y1="-16"
            y2="-16"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-17"
            x1="-10"
            x2="10"
            y1="-17"
            y2="-17"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-18"
            x1="-10"
            x2="10"
            y1="-18"
            y2="-18"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <line
            id="gridy:-19"
            x1="-10"
            x2="10"
            y1="-19"
            y2="-19"
            stroke-width="0.05115089514066496"
            stroke-linecap="round"
            stroke="#E5E5E5"
          ></line>
          <g
            id="c195ff56-4347-4198-bca4-13abe8e366d4"
            transform="translate(-5.796123865826147 9.214975506217053) scale(1.0000000000000002 -1)"
          >
            <text
              id="c195ff56-4347-4198-bca4-13abe8e366d4-0"
              font-size="0.6138107416879796"
              fill="#000000"
              x="0"
              y="-0.6138107416879796"
            >5.9</text>
          </g>
          <g
            id="299dca8c-391a-40d4-9b3c-921e5c09012d"
            transform="translate(1.7367327365728897 14.388586956521738) scale(1.0000000000000002 -1)"
          >
            <text
              id="299dca8c-391a-40d4-9b3c-921e5c09012d-0"
              font-size="0.6138107416879796"
              fill="#000000ff"
              x="0"
              y="-0.6138107416879796"
            >Texte</text>
          </g>
          <line
            id="f71a2ca4-eaf2-4b6e-9f12-b0e6151f91d2"
            x1="-6"
            x2="-5.935990973904316"
            y1="9"
            y2="4.114084090367078"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            stroke="#000000ff"
          ></line>
          <g
            id="a8d303da-1d68-4437-aeab-651bd4f7ad61"
            transform="translate(-5.814542801530163 6.710494730605535) scale(1.0000000000000002 -1)"
          >
            <text
              id="a8d303da-1d68-4437-aeab-651bd4f7ad61-0"
              font-size="0.6138107416879796"
              fill="#000000"
              x="0"
              y="-0.6138107416879796"
            >4.9</text>
          </g>
          <line
            id="7ec11da1-1059-4c1a-938d-4d8748ba5290"
            x1="-5.935990973904316"
            x2="-1.1194698604996562"
            y1="4.114084090367078"
            y2="4.177183994528445"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            stroke="#000000ff"
          ></line>
          <path
            id="7050202a-4b9c-4ab2-b5ed-dfb0448425a4"
            stroke="#000000"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            stroke-linejoin="round"
            fill="none"
            d="M-5.954943024077833,5.560725745631872 L-4.50830136881304,5.57967779580539 L-4.489349318639523,4.133036140540596"
          ></path>
          <g
            id="2b8273ad-f5bf-4615-860c-6e906b722314"
            transform="translate(-4.60189921515595 4.299086727869757) scale(1.0000000000000002 -1)"
          >
            <text
              id="2b8273ad-f5bf-4615-860c-6e906b722314-0"
              font-size="0.6138107416879796"
              fill="#000000"
              x="0"
              y="-0.6138107416879796"
            >4.8</text>
          </g>
          <line
            id="814a0841-1b90-48c8-b06b-839ffa463134"
            x1="-6"
            x2="-1.048545825154226"
            y1="9"
            y2="9.064867624689247"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            stroke="#000000ff"
          ></line>
          <path
            id="ad3d7978-1719-4c50-a6ed-2a36ca0b8c3b"
            stroke="#000000"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            stroke-linejoin="round"
            fill="none"
            d="M-5.981047949826483,7.553358344735205 L-4.534406294561689,7.5723103949087225 L-4.553358344735207,9.018952050173516"
          ></path>
          <g
            id="764fe46d-027d-4939-a8cc-c535d75c2373"
            transform="translate(-4.598441710531077 9.185886497766619) scale(1.0000000000000002 -1)"
          >
            <text
              id="764fe46d-027d-4939-a8cc-c535d75c2373-0"
              font-size="0.6138107416879796"
              fill="#000000"
              x="0"
              y="-0.6138107416879796"
            >5.0</text>
          </g>
          <line
            id="598ba562-aee4-475b-ab3f-502c55f30cd3"
            x1="-1.1194698604996562"
            x2="-1.1848005051565178"
            y1="4.177183994528445"
            y2="9.163981257126647"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            stroke="#000000ff"
          ></line>
          <path
            id="74f92587-8c53-4c41-9a44-22d0bcf29645"
            stroke="#000000"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            stroke-linejoin="round"
            fill="none"
            d="M-2.56611151576445,4.158231944354927 L-2.585063565937967,5.604873599619721 L-1.1384219106731732,5.623825649793239"
          ></path>
          <g
            id="66da8d3f-bbae-4bfd-bfb9-3287a5f55827"
            transform="translate(-2.2263039807820513 5.903319198717572) scale(1.0000000000000002 -1)"
          >
            <text
              id="66da8d3f-bbae-4bfd-bfb9-3287a5f55827-0"
              font-size="0.6138107416879796"
              fill="#000000"
              x="0"
              y="-0.6138107416879796"
            >5.0</text>
          </g>
          <path
            id="bc84f233-04e3-45b7-9e73-f6b8592669d9"
            d="M -6.140505115089514,10.552269820971869 A 0.12133121612343549,0.12133121612343549 0 1 0 -6.145477391254098 10.561614026543824"
            stroke="#000000ff"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            fill="none"
          ></path>
          <g
            id="265ef7e2-9a47-4ec8-a7a5-67c836c7517e"
            transform="translate(-7.738184861271596 9.675740401406243) scale(1.0000000000000002 -1)"
          >
            <text
              id="265ef7e2-9a47-4ec8-a7a5-67c836c7517e-0"
              font-size="0.6138107416879796"
              fill="#000000"
              x="0"
              y="-0.6138107416879796"
            >355&#176;</text>
          </g>
          <path
            id="873148f3-c6cb-4f6b-b849-6e59064cc9fa"
            d="M 2.094789002557544,6.15329283887468 A 6.068044702695114,6.068044702695114 0 0 1 5.8152734854262365 11.933368647515643"
            stroke="#000000ff"
            stroke-width="0.1534526854219949"
            stroke-linecap="round"
            fill="none"
          ></path>
          <g
            id="f8283671-de91-4b2c-8708-dc541ccf1757"
            transform="translate(5.005864551525822 7.698446746679633) scale(1.0000000000000002 -1)"
          >
            <text
              id="f8283671-de91-4b2c-8708-dc541ccf1757-0"
              font-size="0.6138107416879796"
              fill="#000000"
              x="0"
              y="-0.6138107416879796"
            >69&#176;</text>
          </g>
          <ellipse
            id="5e0efb78-b433-41cc-a2d0-c9ddc106d3d7"
            cx="-5.935990973904316"
            cy="4.114084090367078"
            rx="0.23017902813299235"
            ry="0.23017902813299232"
            fill="black"
          ></ellipse>
          <ellipse
            id="928d1e1a-e393-4d8a-a2c0-2e03cc60a4c8"
            cx="-1.1194698604996562"
            cy="4.177183994528445"
            rx="0.23017902813299235"
            ry="0.23017902813299232"
            fill="black"
          ></ellipse>
          <ellipse
            id="94dc3d62-0a3f-4e88-bc4a-cd304ba6f54a"
            cx="-1.1834788865953405"
            cy="9.063099904161367"
            rx="0.23017902813299235"
            ry="0.23017902813299232"
            fill="black"
          ></ellipse>
        </g>
      </svg>
    `;

      const svg3 = `<svg xmlns="http://www.w3.org/2000/svg" width="200" height="100" viewBox="0 0 200 100" version="1.1">
 <ellipse cx="0" cy="0" rx="100" ry="50" stroke="black" stroke-width="6" fill="green"/>
</svg>`;
      const svg = `<svg
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  width="595"
  height="841"
  viewBox="0 0 595 841"
>
  <rect x="0" y="0" width="595" height="841" fill="none" stroke="black"/>
  <g transform="scale(1 -1) translate(0 -841)">
    <g transform="translate(383 581) scale(1 -1)">
      <text font-size="12" fill="#000000ff" x="0" y="-12" >Texte</text>
    </g>
  </g>
</svg>`;

      firstPage.drawText('Select your favorite planet:', {
        x: 100,
        y: 0,
        size: 20,
      });
      firstPage.drawSvg(svg2, {
        x: 100,
        y: 841 /* 
          width: 427 / 3,
          height: 769 / 3 */,
      });
      /* firstPage.drawSvg(svg2, {
        x: 100,
        y: 200
      }); */
      /* firstPage.drawSvg(svg3, {
          x: 500,
          y: 500,
          width: 427 / 3,
          height: 769 / 3 
          }); */

      const pdfBytes = await pdfDoc.save();

      renderInIframe(pdfBytes);
    }
  </script>
</html>
